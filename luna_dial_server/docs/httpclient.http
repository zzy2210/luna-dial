# Luna Dial Server API Test Collection
# VS Code REST Client Extension
# å¯ä»¥å•ç‹¬æ‰§è¡Œæ¯ä¸ªè¯·æ±‚ï¼Œä½¿ç”¨ ### åˆ†éš”

@baseUrl = http://localhost:8081
@sessionId = b49baaff19259275aeee61d91f017439c674679ec3a4b76c643960e8964b8b86

### å¥åº·æ£€æŸ¥
GET {{baseUrl}}/health

### ç‰ˆæœ¬ä¿¡æ¯
GET {{baseUrl}}/version

### ç”¨æˆ·ç™»å½•
# @name login
POST {{baseUrl}}/api/v1/public/auth/login
Content-Type: application/json

{
    "username": "admin",
    "password": "admin@123"
}

### è·å–ç”¨æˆ·èµ„æ–™
GET {{baseUrl}}/api/v1/auth/profile
Authorization: Bearer {{sessionId}}

### è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
GET {{baseUrl}}/api/v1/users/me
Authorization: Bearer {{sessionId}}

### ç”¨æˆ·ç™»å‡º
POST {{baseUrl}}/api/v1/auth/logout
Authorization: Bearer {{sessionId}}

### ç™»å‡ºæ‰€æœ‰è®¾å¤‡
DELETE {{baseUrl}}/api/v1/auth/logout-all
Authorization: Bearer {{sessionId}}

### è·å–æ—¥å¿—åˆ—è¡¨ï¼ˆåˆ†é¡µï¼Œå¸¦è¿‡æ»¤ï¼‰
GET {{baseUrl}}/api/v1/journals/paginated?page=1&page_size=20&journal_type=day&start_date=2023-08-01T00:00:00Z&end_date=2023-08-31T00:00:00Z
Authorization: Bearer {{sessionId}}

### åˆ›å»ºæ—¥å¿—
POST {{baseUrl}}/api/v1/journals
Content-Type: application/json
Authorization: Bearer {{sessionId}}

{
    "title": "æ¯æ—¥å·¥ä½œæ—¥å¿—",
    "content": "ä»Šå¤©å®Œæˆäº† Luna Dial é¡¹ç›®çš„ API æ–‡æ¡£ç¼–å†™...",
    "journal_type": "day",
    "start_date": "2023-08-05T00:00:00Z",
    "end_date": "2023-08-06T00:00:00Z",
    "icon": "ğŸ“–"
}

### æ›´æ–°æ—¥å¿—
PUT {{baseUrl}}/api/v1/journals/journal_id_here
Content-Type: application/json
Authorization: Bearer {{sessionId}}

{
    "title": "æ›´æ–°çš„æ¯æ—¥å·¥ä½œæ—¥å¿—",
    "content": "ä»Šå¤©å®Œæˆäº† Luna Dial é¡¹ç›®çš„ API æ–‡æ¡£ç¼–å†™å’Œæµ‹è¯•...",
    "icon": "ğŸ› ï¸"
}

### åˆ é™¤æ—¥å¿—
DELETE {{baseUrl}}/api/v1/journals/journal_id_here
Authorization: Bearer {{sessionId}}

### è·å–ä»»åŠ¡åˆ—è¡¨ï¼ˆæŒ‰æ—¶é—´å‘¨æœŸï¼‰
GET {{baseUrl}}/api/v1/tasks
Content-Type: application/json
Authorization: Bearer {{sessionId}}

{
    "period_type": "week",
    "start_date": "2023-07-31T00:00:00Z",
    "end_date": "2023-08-07T00:00:00Z"
}

### è·å–ä»»åŠ¡åˆ—è¡¨ - æŒ‰çŠ¶æ€ç­›é€‰
GET {{baseUrl}}/api/v1/tasks?status=pending&page=1&limit=10
Authorization: Bearer {{sessionId}}

### åˆ›å»ºä»»åŠ¡
POST {{baseUrl}}/api/v1/tasks
Content-Type: application/json
Authorization: Bearer {{sessionId}}

{
    "title": "å®Œæˆé¡¹ç›®æ–‡æ¡£",
    "description": "ç¼–å†™å®Œæ•´çš„ API æ–‡æ¡£å’Œç”¨æˆ·æ‰‹å†Œ",
    "period_type": "month",
    "start_date": "2023-08-01T00:00:00Z",
    "end_date": "2023-09-01T00:00:00Z",
    "priority": "high",
    "tags": ["æ–‡æ¡£", "API", "é‡è¦"],
    "icon": "ğŸ“"
}

### åˆ›å»ºå­ä»»åŠ¡
POST {{baseUrl}}/api/v1/tasks/parent_task_id_here/subtasks
Content-Type: application/json
Authorization: Bearer {{sessionId}}

{
    "title": "å®¡æŸ¥ API æ–‡æ¡£",
    "description": "æ£€æŸ¥ API æ–‡æ¡£çš„å‡†ç¡®æ€§å’Œå®Œæ•´æ€§",
    "period_type": "day",
    "start_date": "2023-08-09T00:00:00Z",
    "end_date": "2023-08-10T00:00:00Z",
    "priority": "medium",
    "tags": ["å®¡æŸ¥", "æ–‡æ¡£"],
    "icon": "ğŸ“‹"
}

### æ›´æ–°ä»»åŠ¡
PUT {{baseUrl}}/api/v1/tasks/task_id_here
Content-Type: application/json
Authorization: Bearer {{sessionId}}

{
    "title": "å®Œæˆé¡¹ç›®æ–‡æ¡£ï¼ˆæ›´æ–°ï¼‰",
    "description": "ç¼–å†™å®Œæ•´çš„ API æ–‡æ¡£ã€ç”¨æˆ·æ‰‹å†Œå’Œéƒ¨ç½²æŒ‡å—",
    "priority": "high",
    "start_date": "2023-08-05T00:00:00Z",
    "end_date": "2023-08-12T00:00:00Z",
    "status": "in_progress",
    "icon": "ğŸš€",
    "tags": ["æ–‡æ¡£", "API", "é‡è¦"]
}

### å®Œæˆä»»åŠ¡
POST {{baseUrl}}/api/v1/tasks/task_id_here/complete
Authorization: Bearer {{sessionId}}

### æ›´æ–°ä»»åŠ¡è¯„åˆ†
PUT {{baseUrl}}/api/v1/tasks/task_id_here/score
Content-Type: application/json
Authorization: Bearer {{sessionId}}

{
    "score": 90
}

### åˆ é™¤ä»»åŠ¡
DELETE {{baseUrl}}/api/v1/tasks/task_id_here
Authorization: Bearer {{sessionId}}

### è·å–è®¡åˆ’ä¿¡æ¯ï¼ˆå«ä»»åŠ¡ã€æ—¥å¿—ã€ç»Ÿè®¡ï¼‰
GET {{baseUrl}}/api/v1/plans
Content-Type: application/json
Authorization: Bearer {{sessionId}}

{
    "period_type": "week",
    "start_date": "2023-07-31T00:00:00Z",
    "end_date": "2023-08-07T00:00:00Z"
}

### è·å–è®¡åˆ’åˆ—è¡¨ - æŒ‰ç±»å‹ç­›é€‰
GET {{baseUrl}}/api/v1/plans?type=day&page=1&limit=10
Authorization: Bearer {{sessionId}}

### æµ‹è¯•é”™è¯¯å¤„ç† - æ— æ•ˆçš„ç™»å½•
POST {{baseUrl}}/api/v1/public/auth/login
Content-Type: application/json

{
    "username": "invalid_user",
    "password": "wrong_password"
}

### æµ‹è¯•æœªæˆæƒè®¿é—®
GET {{baseUrl}}/api/v1/tasks
# æ³¨æ„ï¼šè¿™é‡Œæ²¡æœ‰ Cookieï¼Œåº”è¯¥è¿”å› 401

### æµ‹è¯•ä¸å­˜åœ¨çš„èµ„æº
GET {{baseUrl}}/api/v1/tasks/non_existent_task_id
Authorization: Bearer {{sessionId}}
