<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luna Dial - ä¸ªäººè®¾ç½®</title>
    <link rel="stylesheet" href="auth.css">
</head>
<body>
    <div class="profile-container">
        <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
        <header class="profile-navbar">
            <div class="navbar-left">
                <button class="btn-back" onclick="window.location.href='dashboard.html'">
                    <span class="back-icon">â†</span>
                    <span>è¿”å›ä¸»é¡µ</span>
                </button>
            </div>
            <div class="navbar-center">
                <span class="logo-icon">ğŸŒ™</span>
                <h1 class="page-title">ä¸ªäººè®¾ç½®</h1>
            </div>
            <div class="navbar-right">
                <span class="current-time" id="currentTime"></span>
            </div>
        </header>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="profile-main">
            <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
            <section class="profile-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="section-icon">ğŸ‘¤</span>
                        åŸºæœ¬ä¿¡æ¯
                    </h2>
                </div>
                <div class="info-card">
                    <div class="info-row">
                        <label class="info-label">ç”¨æˆ·å</label>
                        <span class="info-value" id="username">-</span>
                    </div>
                    <div class="info-row">
                        <label class="info-label">å§“å</label>
                        <span class="info-value" id="name">-</span>
                    </div>
                    <div class="info-row">
                        <label class="info-label">é‚®ç®±</label>
                        <span class="info-value" id="email">-</span>
                    </div>
                    <div class="info-row">
                        <label class="info-label">ç”¨æˆ·ID</label>
                        <span class="info-value mono" id="userId">-</span>
                    </div>
                </div>
            </section>

            <!-- è´¦æˆ·ä¿¡æ¯å¡ç‰‡ -->
            <section class="profile-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="section-icon">ğŸ“Š</span>
                        è´¦æˆ·ä¿¡æ¯
                    </h2>
                </div>
                <div class="info-card">
                    <div class="info-row">
                        <label class="info-label">åˆ›å»ºæ—¶é—´</label>
                        <span class="info-value" id="createdAt">-</span>
                    </div>
                    <div class="info-row">
                        <label class="info-label">æœ€åæ›´æ–°</label>
                        <span class="info-value" id="updatedAt">-</span>
                    </div>
                    <div class="info-row">
                        <label class="info-label">è´¦æˆ·çŠ¶æ€</label>
                        <span class="info-value status-active">
                            <span class="status-dot"></span>
                            æ­£å¸¸
                        </span>
                    </div>
                </div>
            </section>

            <!-- ä¼šè¯ä¿¡æ¯å¡ç‰‡ -->
            <section class="profile-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="section-icon">ğŸ”</span>
                        ä¼šè¯ä¿¡æ¯
                    </h2>
                </div>
                <div class="info-card">
                    <div class="info-row">
                        <label class="info-label">ä¼šè¯ID</label>
                        <span class="info-value mono small" id="sessionId">-</span>
                    </div>
                    <div class="info-row">
                        <label class="info-label">æœ€åæ´»åŠ¨</label>
                        <span class="info-value" id="lastAccess">-</span>
                    </div>
                    <div class="info-row">
                        <label class="info-label">è¿‡æœŸæ—¶é—´</label>
                        <span class="info-value" id="expiresAt">-</span>
                    </div>
                    <div class="info-row">
                        <label class="info-label">å‰©ä½™æ—¶é—´</label>
                        <span class="info-value" id="remainingTime">-</span>
                    </div>
                </div>
            </section>

            <!-- æ“ä½œåŒºåŸŸ -->
            <section class="profile-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="section-icon">âš™ï¸</span>
                        è´¦æˆ·æ“ä½œ
                    </h2>
                </div>
                <div class="action-card">
                    <div class="action-group">
                        <button class="btn-action btn-logout" id="btnLogout">
                            <span class="action-icon">ğŸšª</span>
                            <div class="action-text">
                                <span class="action-title">é€€å‡ºç™»å½•</span>
                                <span class="action-desc">é€€å‡ºå½“å‰è®¾å¤‡çš„ç™»å½•çŠ¶æ€</span>
                            </div>
                        </button>
                    </div>
                    <div class="action-group">
                        <button class="btn-action btn-danger" id="btnLogoutAll">
                            <span class="action-icon">ğŸš¨</span>
                            <div class="action-text">
                                <span class="action-title">é€€å‡ºæ‰€æœ‰è®¾å¤‡</span>
                                <span class="action-desc">æ¸…é™¤æ‰€æœ‰è®¾å¤‡ä¸Šçš„ç™»å½•çŠ¶æ€</span>
                            </div>
                        </button>
                    </div>
                </div>
            </section>

            <!-- ç»Ÿè®¡ä¿¡æ¯ -->
            <section class="profile-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="section-icon">ğŸ“ˆ</span>
                        ä½¿ç”¨ç»Ÿè®¡
                    </h2>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="totalTasks">0</div>
                        <div class="stat-label">ä»»åŠ¡æ€»æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="completedTasks">0</div>
                        <div class="stat-label">å·²å®Œæˆ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalJournals">0</div>
                        <div class="stat-label">æ—¥å¿—æ€»æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalEffort">0</div>
                        <div class="stat-label">ç´¯è®¡åŠªåŠ›å€¼</div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- ç¡®è®¤å¯¹è¯æ¡† -->
    <div class="modal-overlay" id="confirmModal" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">ç¡®è®¤æ“ä½œ</h3>
            </div>
            <div class="modal-body">
                <p id="modalMessage">ç¡®å®šè¦æ‰§è¡Œæ­¤æ“ä½œå—ï¼Ÿ</p>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" id="btnCancel">å–æ¶ˆ</button>
                <button class="btn-confirm" id="btnConfirm">ç¡®è®¤</button>
            </div>
        </div>
    </div>

    <!-- åŠ è½½é®ç½© -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-content">
            <div class="spinner-large"></div>
            <p class="loading-text">åŠ è½½ä¸­...</p>
        </div>
    </div>

    <script src="auth.js"></script>
    <script>
        // é¡µé¢åŠ è½½æ—¶è·å–ç”¨æˆ·ä¿¡æ¯
        document.addEventListener('DOMContentLoaded', function() {
            loadUserProfile();
            updateCurrentTime();
            setInterval(updateCurrentTime, 1000);
        });

        function updateCurrentTime() {
            const now = new Date();
            const timeStr = now.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('currentTime').textContent = timeStr;
        }
    </script>
</body>
</html>